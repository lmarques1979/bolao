(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){function o(e){if(e.minTime){e.minTime=x(e.minTime)}if(e.maxTime){e.maxTime=x(e.maxTime)}if(e.durationTime&&typeof e.durationTime!=="function"){e.durationTime=x(e.durationTime)}if(e.disableTimeRanges.length>0){for(var t in e.disableTimeRanges){e.disableTimeRanges[t]=[x(e.disableTimeRanges[t][0]),x(e.disableTimeRanges[t][1])]}e.disableTimeRanges=e.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var t=e.disableTimeRanges.length-1;t>0;t--){if(e.disableTimeRanges[t][0]<=e.disableTimeRanges[t-1][1]){e.disableTimeRanges[t-1]=[Math.min(e.disableTimeRanges[t][0],e.disableTimeRanges[t-1][0]),Math.max(e.disableTimeRanges[t][1],e.disableTimeRanges[t-1][1])];e.disableTimeRanges.splice(t,1)}}}return e}function u(t){var r=t.data("timepicker-settings");var i=t.data("timepicker-list");if(i&&i.length){i.remove();t.data("timepicker-list",false)}if(r.useSelect){i=e("<select />",{"class":"ui-timepicker-select"});var o=i}else{i=e("<ul />",{"class":"ui-timepicker-list"});var o=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});o.css({display:"none",position:"absolute"}).append(i)}if(r.noneOption){if(r.noneOption===true){r.noneOption=r.useSelect?"Time...":"None"}if(e.isArray(r.noneOption)){for(var u in r.noneOption){if(parseInt(u,10)===u){var l=a(r.noneOption[u],r.useSelect);i.append(l)}}}else{var l=a(r.noneOption,r.useSelect);i.append(l)}}if(r.className){o.addClass(r.className)}if((r.minTime!==null||r.durationTime!==null)&&r.showDuration){o.addClass("ui-timepicker-with-duration");o.addClass("ui-timepicker-step-"+r.step)}var c=r.minTime;if(typeof r.durationTime==="function"){c=x(r.durationTime())}else if(r.durationTime!==null){c=r.durationTime}var p=r.minTime!==null?r.minTime:0;var v=r.maxTime!==null?r.maxTime:p+n-1;if(v<=p){v+=n}if(v===n-1&&r.timeFormat.indexOf("H")!==-1){v=n}var m=r.disableTimeRanges;var y=0;var b=m.length;for(var u=p;u<=v;u+=r.step*60){var T=u;var N=S(T,r.timeFormat);if(r.useSelect){var C=e("<option />",{value:N});C.text(N)}else{var C=e("<li />");C.data("time",T<=86400?T:T%86400);C.text(N)}if((r.minTime!==null||r.durationTime!==null)&&r.showDuration){var k=E(u-c,r.step);if(r.useSelect){C.text(C.text()+" ("+k+")")}else{var L=e("<span />",{"class":"ui-timepicker-duration"});L.text(" ("+k+")");C.append(L)}}if(y<b){if(T>=m[y][1]){y+=1}if(m[y]&&T>=m[y][0]&&T<m[y][1]){if(r.useSelect){C.prop("disabled",true)}else{C.addClass("ui-timepicker-disabled")}}}i.append(C)}o.data("timepicker-input",t);t.data("timepicker-list",o);if(r.useSelect){i.val(f(t.val(),r));i.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")});i.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")});i.on("change",function(){g(t,e(this).val(),"select")});t.hide().after(i)}else{var A=r.appendTo;if(typeof A==="string"){A=e(A)}else if(typeof A==="function"){A=A(t)}A.append(o);d(t,i);i.on("click","li",function(n){t.off("focus.timepicker");t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack");t.on("focus.timepicker",s.show)});if(!h(t)){t[0].focus()}i.find("li").removeClass("ui-timepicker-selected");e(this).addClass("ui-timepicker-selected");if(w(t)){t.trigger("hideTimepicker");o.hide()}})}}function a(t,n){var r,i,s;if(typeof t=="object"){r=t.label;i=t.className;s=t.value}else if(typeof t=="string"){r=t}else{e.error("Invalid noneOption value")}if(n){return e("<option />",{value:s,"class":i,text:r})}else{return e("<li />",{"class":i,text:r}).data("time",s)}}function f(t,n){if(!e.isNumeric(t)){t=x(t)}if(t===null){return null}else{var r=n.step*60;return S(Math.round(t/r)*r,n.timeFormat)}}function l(){return new Date(1970,1,1,0,0,0)}function c(t){var n=e(t.target);var r=n.closest(".ui-timepicker-input");if(r.length===0&&n.closest(".ui-timepicker-wrapper").length===0){s.hide();e(document).unbind(".ui-timepicker")}}function h(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function p(t,n,r){if(!r&&r!==0){return false}var i=t.data("timepicker-settings");var s=false;var o=i.step*30;n.find("li").each(function(t,n){var i=e(n);if(typeof i.data("time")!="number"){return}var u=i.data("time")-r;if(Math.abs(u)<o||u==o){s=i;return false}});return s}function d(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=x(m(e));if(n===null){return}var r=p(e,t,n);if(r){var i=r.offset().top-t.offset().top;if(i+r.outerHeight()>t.outerHeight()||i<0){t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight())}r.addClass("ui-timepicker-selected")}}function v(t){if(this.value===""){return}var n=e(this);var r=n.data("timepicker-list");if(n.is(":focus")&&(!t||t.type!="change")){return}var i=x(this.value);if(i===null){n.trigger("timeFormatError");return}var s=n.data("timepicker-settings");var o=false;if(s.minTime!==null&&i<s.minTime){o=true}else if(s.maxTime!==null&&i>s.maxTime){o=true}e.each(s.disableTimeRanges,function(){if(i>=this[0]&&i<this[1]){o=true;return false}});if(s.forceRoundTime){var u=i%(s.step*60);if(u>=s.step*30){i+=s.step*60-u}else{i-=u}}var a=S(i,s.timeFormat);if(o){if(g(n,a,"error")){n.trigger("timeRangeError")}}else{g(n,a)}}function m(e){if(e.is("input")){return e.val()}else{return e.data("ui-timepicker-value")}}function g(e,t,n){if(e.is("input")){e.val(t);var r=e.data("timepicker-settings");if(r.useSelect){e.data("timepicker-list").val(f(t,r))}}if(e.data("ui-timepicker-value")!=t){e.data("ui-timepicker-value",t);if(n=="select"){e.trigger("selectTime").trigger("changeTime").trigger("change")}else if(n!="error"){e.trigger("changeTime")}return true}else{e.trigger("selectTime");return false}}function y(t){var n=e(this);var r=n.data("timepicker-list");if(!r||!r.is(":visible")){if(t.keyCode==40){if(!h(n)){n.focus()}}else{return true}}switch(t.keyCode){case 13:if(w(n)){s.hide.apply(this)}t.preventDefault();return false;case 38:var i=r.find(".ui-timepicker-selected");if(!i.length){r.find("li").each(function(t,n){if(e(n).position().top>0){i=e(n);return false}});i.addClass("ui-timepicker-selected")}else if(!i.is(":first-child")){i.removeClass("ui-timepicker-selected");i.prev().addClass("ui-timepicker-selected");if(i.prev().position().top<i.outerHeight()){r.scrollTop(r.scrollTop()-i.outerHeight())}}return false;case 40:i=r.find(".ui-timepicker-selected");if(i.length===0){r.find("li").each(function(t,n){if(e(n).position().top>0){i=e(n);return false}});i.addClass("ui-timepicker-selected")}else if(!i.is(":last-child")){i.removeClass("ui-timepicker-selected");i.next().addClass("ui-timepicker-selected");if(i.next().position().top+2*i.outerHeight()>r.outerHeight()){r.scrollTop(r.scrollTop()+i.outerHeight())}}return false;case 27:r.find("li").removeClass("ui-timepicker-selected");s.hide();break;case 9:s.hide();break;default:return true}}function b(t){var n=e(this);var r=n.data("timepicker-list");if(!r||!r.is(":visible")){return true}if(!n.data("timepicker-settings").typeaheadHighlight){r.find("li").removeClass("ui-timepicker-selected");return true}switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:d(n,r);break;default:return}}function w(e){var t=e.data("timepicker-settings");var n=e.data("timepicker-list");var r=null;var i=n.find(".ui-timepicker-selected");if(i.hasClass("ui-timepicker-disabled")){return false}if(i.length){r=i.data("time")}else if(m(e)){r=x(m(e));d(e,n)}if(r!==null){if(typeof r=="string"){e.val(r)}else{var s=S(r,t.timeFormat);g(e,s,"select")}}return true}function E(e,t){var n=Math.round(e/60),r=[],s,o;if(n<60){r=[n,i.mins]}else{s=Math.floor(n/60);o=n%60;if(t==30&&o==30){s+=i.decimal+5}r.push(s);r.push(s==1?i.hr:i.hrs);if(t!=30&&o){r.push(o);r.push(i.mins)}}return r.join(" ")}function S(e,r){if(e===null){return}var s=new Date(t.valueOf()+e*1e3);if(isNaN(s.getTime())){return}var o="";var u,a;for(var f=0;f<r.length;f++){a=r.charAt(f);switch(a){case"a":o+=s.getHours()>11?i.pm:i.am;break;case"A":o+=s.getHours()>11?i.PM:i.AM;break;case"g":u=s.getHours()%12;o+=u===0?"12":u;break;case"G":o+=s.getHours();break;case"h":u=s.getHours()%12;if(u!==0&&u<10){u="0"+u}o+=u===0?"12":u;break;case"H":u=s.getHours();if(e===n)u=24;o+=u>9?u:"0"+u;break;case"i":var l=s.getMinutes();o+=l>9?l:"0"+l;break;case"s":e=s.getSeconds();o+=e>9?e:"0"+e;break;default:o+=a}}return o}function x(e){if(e==="")return null;if(!e||e+0==e)return e;if(typeof e=="object"){e=e.getHours()+":"+T(e.getMinutes())+":"+T(e.getSeconds())}e=e.toLowerCase();var t=new Date(0);var n;if(e.indexOf(":")===-1){n=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/);if(!n){n=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)}}else{n=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/)}if(!n){return null}var r=parseInt(n[1]*1,10);var i;if(n[4]){if(r==12){i=n[4]=="p"?12:0}else{i=r+(n[4]=="p"?12:0)}}else{i=r}var s=n[2]*1||0;var o=n[3]*1||0;return i*3600+s*60+o}function T(e){return("0"+e).slice(-2)}var t=l();var n=86400;var r={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,timeFormat:"g:ia",scrollDefaultNow:false,scrollDefaultTime:false,selectOnBlur:false,disableTouchKeyboard:false,forceRoundTime:false,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:false,typeaheadHighlight:true,noneOption:false};var i={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var s={init:function(t){return this.each(function(){var n=e(this);var a=[];for(var f in r){if(n.data(f)){a[f]=n.data(f)}}var l=e.extend({},r,a,t);if(l.lang){i=e.extend(i,l.lang)}l=o(l);n.data("timepicker-settings",l);n.addClass("ui-timepicker-input");if(l.useSelect){u(n)}else{n.prop("autocomplete","off");n.on("click.timepicker focus.timepicker",s.show);n.on("change.timepicker",v);n.on("keydown.timepicker",y);n.on("keyup.timepicker",b);v.call(n.get(0))}})},show:function(t){if(t){t.preventDefault()}var n=e(this);var r=n.data("timepicker-settings");if(r.useSelect){n.data("timepicker-list").focus();return}if(h(n)){n.blur()}var i=n.data("timepicker-list");if(n.prop("readonly")){return}if(!i||i.length===0||typeof r.durationTime==="function"){u(n);i=n.data("timepicker-list")}if(i.is(":visible")){return}s.hide();i.show();var o={};if(r.orientation=="rtl"){o.left=n.offset().left+n.outerWidth()-i.outerWidth()+parseInt(i.css("marginLeft").replace("px",""),10)}else{o.left=n.offset().left+parseInt(i.css("marginLeft").replace("px",""),10)}if(n.offset().top+n.outerHeight(true)+i.outerHeight()>e(window).height()+e(window).scrollTop()){o.top=n.offset().top-i.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)}else{o.top=n.offset().top+n.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)}i.offset(o);var a=i.find(".ui-timepicker-selected");if(!a.length){if(m(n)){a=p(n,i,x(m(n)))}else if(r.scrollDefaultNow){a=p(n,i,x(new Date))}else if(r.scrollDefaultTime!==false){a=p(n,i,x(r.scrollDefaultTime))}}if(a&&a.length){var f=i.scrollTop()+a.position().top-a.outerHeight();i.scrollTop(f)}else{i.scrollTop(0)}e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c);if(r.closeOnWindowScroll){e(document).on("scroll.ui-timepicker",c)}n.trigger("showTimepicker");return this},hide:function(t){var n=e(this);var r=n.data("timepicker-settings");if(r&&r.useSelect){n.blur()}e(".ui-timepicker-wrapper:visible").each(function(){var t=e(this);var n=t.data("timepicker-input");var r=n.data("timepicker-settings");if(r&&r.selectOnBlur){w(n)}t.hide();n.trigger("hideTimepicker")});return this},option:function(t,n){var r=this;var i=r.data("timepicker-settings");var s=r.data("timepicker-list");if(typeof t=="object"){i=e.extend(i,t)}else if(typeof t=="string"&&typeof n!="undefined"){i[t]=n}else if(typeof t=="string"){return i[t]}i=o(i);r.data("timepicker-settings",i);if(s){s.remove();r.data("timepicker-list",false)}if(i.useSelect){u(r)}return this},getSecondsFromMidnight:function(){return x(m(this))},getTime:function(e){var t=this;var n=m(t);if(!n){return null}if(!e){e=new Date}var r=x(n);var i=new Date(e);i.setHours(r/3600);i.setMinutes(r%3600/60);i.setSeconds(r%60);i.setMilliseconds(0);return i},setTime:function(e){var t=this;var n=S(x(e),t.data("timepicker-settings").timeFormat);g(t,n);if(t.data("timepicker-list")){d(t,t.data("timepicker-list"))}return this},remove:function(){var e=this;if(!e.hasClass("ui-timepicker-input")){return}e.removeAttr("autocomplete","off");e.removeClass("ui-timepicker-input");e.removeData("timepicker-settings");e.off(".timepicker");if(e.data("timepicker-list")){e.data("timepicker-list").remove()}e.removeData("timepicker-list");return this}};e.fn.timepicker=function(t){if(!this.length)return this;if(s[t]){if(!this.hasClass("ui-timepicker-input")){return this}return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.timepicker")}}})